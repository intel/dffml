

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Command Line &mdash; DFFML 0.3.7 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/copybutton.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="author" title="About these documents" href="about.html" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="HTTP API" href="plugins/service/http/index.html" />
    <link rel="prev" title="Services" href="plugins/dffml_service_cli.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> DFFML
          

          
          </a>

          
            
            
              <div class="version">
                0.3.7
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Introduction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="about.html">About</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="concepts/index.html">Concepts</a></li>
</ul>
<p class="caption"><span class="caption-text">Examples</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="quickstart/model.html">Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorials/index.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage/index.html">Use Cases</a></li>
</ul>
<p class="caption"><span class="caption-text">Reference</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="plugins/index.html">Plugins</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Command Line</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#model">Model</a></li>
<li class="toctree-l2"><a class="reference internal" href="#dataflow">DataFlow</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#create">Create</a></li>
<li class="toctree-l3"><a class="reference internal" href="#merge">Merge</a></li>
<li class="toctree-l3"><a class="reference internal" href="#run">Run</a></li>
<li class="toctree-l3"><a class="reference internal" href="#diagram">Diagram</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#config">Config</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#convert">Convert</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#service">Service</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#http">HTTP</a></li>
<li class="toctree-l3"><a class="reference internal" href="#dev">Dev</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#export">Export</a></li>
<li class="toctree-l4"><a class="reference internal" href="#cli-service-dev-create">Create</a></li>
<li class="toctree-l4"><a class="reference internal" href="#entrypoints">Entrypoints</a></li>
<li class="toctree-l4"><a class="reference internal" href="#setuppy">setuppy</a></li>
<li class="toctree-l4"><a class="reference internal" href="#bump">bump</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="plugins/service/http/index.html">HTTP API</a></li>
<li class="toctree-l1"><a class="reference internal" href="api/index.html">API Reference</a></li>
</ul>
<p class="caption"><span class="caption-text">Community</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://github.com/intel/dffml">GitHub</a></li>
<li class="toctree-l1"><a class="reference internal" href="publications.html">Publications</a></li>
<li class="toctree-l1"><a class="reference internal" href="contact.html">Contact Us</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing/index.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Changelog</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">DFFML</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Command Line</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            
              <a href="https://github.com/intel/dffml/blob/master/docs/cli.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="command-line">
<h1><a class="toc-backref" href="#id3">Command Line</a><a class="headerlink" href="#command-line" title="Permalink to this headline">¶</a></h1>
<p>Almost anything you can get done with the Python API you can get done with the
command line interface too (and HTTP API).</p>
<p>There are many more commands than what is listed here. Use the <code class="docutils literal notranslate"><span class="pre">-h</span></code> flag to
see them all.</p>
<div class="contents topic" id="command-line-interface">
<p class="topic-title">Command Line Interface</p>
<ul class="simple">
<li><p><a class="reference internal" href="#command-line" id="id3">Command Line</a></p>
<ul>
<li><p><a class="reference internal" href="#model" id="id4">Model</a></p></li>
<li><p><a class="reference internal" href="#dataflow" id="id5">DataFlow</a></p>
<ul>
<li><p><a class="reference internal" href="#create" id="id6">Create</a></p></li>
<li><p><a class="reference internal" href="#merge" id="id7">Merge</a></p></li>
<li><p><a class="reference internal" href="#run" id="id8">Run</a></p></li>
<li><p><a class="reference internal" href="#diagram" id="id9">Diagram</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#config" id="id10">Config</a></p>
<ul>
<li><p><a class="reference internal" href="#convert" id="id11">Convert</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#service" id="id12">Service</a></p>
<ul>
<li><p><a class="reference internal" href="#http" id="id13">HTTP</a></p></li>
<li><p><a class="reference internal" href="#dev" id="id14">Dev</a></p>
<ul>
<li><p><a class="reference internal" href="#export" id="id15">Export</a></p></li>
<li><p><a class="reference internal" href="#cli-service-dev-create" id="id16">Create</a></p></li>
<li><p><a class="reference internal" href="#entrypoints" id="id17">Entrypoints</a></p>
<ul>
<li><p><a class="reference internal" href="#list" id="id18">List</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#setuppy" id="id19">setuppy</a></p>
<ul>
<li><p><a class="reference internal" href="#kwarg" id="id20">kwarg</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#bump" id="id21">bump</a></p>
<ul>
<li><p><a class="reference internal" href="#main" id="id22">main</a></p></li>
<li><p><a class="reference internal" href="#packages" id="id23">packages</a></p></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="model">
<h2><a class="toc-backref" href="#id4">Model</a><a class="headerlink" href="#model" title="Permalink to this headline">¶</a></h2>
<p>Train, asses accuracy, and use models for prediction. See the
plugin docs for <a class="reference internal" href="plugins/dffml_model.html"><span class="doc">Models</span></a> for usage.</p>
</div>
<div class="section" id="dataflow">
<h2><a class="toc-backref" href="#id5">DataFlow</a><a class="headerlink" href="#dataflow" title="Permalink to this headline">¶</a></h2>
<p>Create, modify, run, and visualize DataFlows.</p>
<div class="section" id="create">
<h3><a class="toc-backref" href="#id6">Create</a><a class="headerlink" href="#create" title="Permalink to this headline">¶</a></h3>
<p>Ouput the dataflow description to standard output using the specified config
format.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>dffml dataflow create -config yaml get_single clone_git_repo &gt; df.yaml
</pre></div>
</div>
</div>
<div class="section" id="merge">
<h3><a class="toc-backref" href="#id7">Merge</a><a class="headerlink" href="#merge" title="Permalink to this headline">¶</a></h3>
<p>Combine two dataflows into one. Dataflows must either be all linked or all not
linked.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>dffml dataflow merge base.yaml overrides.yaml
</pre></div>
</div>
</div>
<div class="section" id="run">
<h3><a class="toc-backref" href="#id8">Run</a><a class="headerlink" href="#run" title="Permalink to this headline">¶</a></h3>
<p>Ouput the dataflow description to standard output using the specified config
format.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">-no-strict</span></code> flag tell DFFML not to exit if one key fails, continue
running the dataflow until everything is complete, useful for error prone
scraping tasks.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>dffml dataflow run records <span class="nb">set</span> <span class="se">\</span>
<span class="go">    -keys https://github.com/intel/dffml \</span>
<span class="go">    -record-def URL \</span>
<span class="go">    -dataflow df.yaml \</span>
<span class="go">    -sources gathered=json \</span>
<span class="go">    -source-filename /tmp/data.json \</span>
<span class="go">    -no-strict</span>
</pre></div>
</div>
</div>
<div class="section" id="diagram">
<h3><a class="toc-backref" href="#id9">Diagram</a><a class="headerlink" href="#diagram" title="Permalink to this headline">¶</a></h3>
<p>Output a mermaidjs graph description of a DataFlow.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>dffml dataflow diagram -simple shouldi.json
</pre></div>
</div>
<p>You can now copy the graph description and paste it in the
<a class="reference external" href="https://mermaidjs.github.io/mermaid-live-editor">mermaidjs live editor</a> (or
use the CLI tool) to generate an SVG or other format of the graph.</p>
</div>
</div>
<div class="section" id="config">
<h2><a class="toc-backref" href="#id10">Config</a><a class="headerlink" href="#config" title="Permalink to this headline">¶</a></h2>
<div class="section" id="convert">
<span id="cli-config-convert"></span><h3><a class="toc-backref" href="#id11">Convert</a><a class="headerlink" href="#convert" title="Permalink to this headline">¶</a></h3>
<p>Convert one config file format into another.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>dffml config convert -config-out yaml config_in.json
</pre></div>
</div>
</div>
</div>
<div class="section" id="service">
<h2><a class="toc-backref" href="#id12">Service</a><a class="headerlink" href="#service" title="Permalink to this headline">¶</a></h2>
<p>Services are various command line utilities that are associated with DFFML.</p>
<p>For a complete list of services maintained within the core codebase see the
<a class="reference internal" href="plugins/dffml_service_cli.html"><span class="doc">Services</span></a> plugin docs.</p>
<div class="section" id="http">
<h3><a class="toc-backref" href="#id13">HTTP</a><a class="headerlink" href="#http" title="Permalink to this headline">¶</a></h3>
<p>Everything you can do via the Python library or command line interface you can
also do over an HTTP interface. See the
<a class="reference internal" href="plugins/service/http/index.html"><span class="doc">HTTP API</span></a> docs for more information.</p>
</div>
<div class="section" id="dev">
<h3><a class="toc-backref" href="#id14">Dev</a><a class="headerlink" href="#dev" title="Permalink to this headline">¶</a></h3>
<p>Development utilities for creating new packages or hacking on the core codebase.</p>
<div class="section" id="export">
<h4><a class="toc-backref" href="#id15">Export</a><a class="headerlink" href="#export" title="Permalink to this headline">¶</a></h4>
<p>Given the
<a class="reference external" href="https://packaging.python.org/specifications/entry-points/">entrypoint</a>
of an object, covert the object to it’s <code class="docutils literal notranslate"><span class="pre">dict</span></code> representation, and export it
using the given config format.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>dffml service dev <span class="nb">export</span> -config json shouldi.cli:DATAFLOW
</pre></div>
</div>
</div>
<div class="section" id="cli-service-dev-create">
<span id="id1"></span><h4><a class="toc-backref" href="#id16">Create</a><a class="headerlink" href="#cli-service-dev-create" title="Permalink to this headline">¶</a></h4>
<p>You can create a new python package and start implementing a new plugin for
DFFML right away with the <code class="docutils literal notranslate"><span class="pre">create</span></code> command of <code class="docutils literal notranslate"><span class="pre">dev</span></code>.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>dffml service dev create model cool-ml-model
<span class="gp">$ </span><span class="nb">cd</span> cool-ml-model
<span class="gp">$ </span>python setup.py <span class="nb">test</span>
</pre></div>
</div>
<p>When you’re done you can upload it to PyPi and it’ll be <code class="docutils literal notranslate"><span class="pre">pip</span></code> installable so
that other DFFML users can use it in their code or via the CLI. If you don’t
want to mess with uploading to <code class="docutils literal notranslate"><span class="pre">PyPi</span></code>, you can install it from your git repo
(wherever it may be that you upload it to).</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>python -m pip install -U git+https://github.com/user/cool-ml-model
</pre></div>
</div>
<p>Make sure to look in <code class="docutils literal notranslate"><span class="pre">setup.py</span></code> and edit the <code class="docutils literal notranslate"><span class="pre">entry_points</span></code> to match
whatever you’ve edited. This way whatever you make will be usable by others
within the DFFML CLI and HTTP API as soon as they <code class="docutils literal notranslate"><span class="pre">pip</span></code> install your package,
nothing else required.</p>
</div>
<div class="section" id="entrypoints">
<h4><a class="toc-backref" href="#id17">Entrypoints</a><a class="headerlink" href="#entrypoints" title="Permalink to this headline">¶</a></h4>
<p>DFFML makes heavy use of the Python
<a class="reference external" href="https://packaging.python.org/specifications/entry-points/">entrypoint</a>
system. The following tools will help you with development and use of the
entrypoints system.</p>
<div class="section" id="list">
<h5><a class="toc-backref" href="#id18">List</a><a class="headerlink" href="#list" title="Permalink to this headline">¶</a></h5>
<p>Sometimes you’ll find that you’ve installed a package in development
mode, but the code that’s being run when your using the CLI or HTTP API isn’t
the code you’ve made modifications to, but instead it seems to be the latest
released version. That’s because if the latest released version is installed,
the development mode source will be ignored by Python.</p>
<p>If you face this problem the first thing you’ll want to do is identify the
entrypoint your plugin is being loaded from. Then you’ll want to run this
command giving it that entrypoint. It will list all the registered plugins for
that entrypoint, along with the location of the source code being used.</p>
<p>In the following example, we see that the <code class="docutils literal notranslate"><span class="pre">is_binary_pie</span></code> operation registered
under the <code class="docutils literal notranslate"><span class="pre">dffml.operation</span></code> entrypoint is using the source from the
<code class="docutils literal notranslate"><span class="pre">site-packages</span></code> directory. When you see <code class="docutils literal notranslate"><span class="pre">site-packages</span></code> you’ll know that the
development version is not the one being used! That’s the location where release
packages get installed. You’ll want to remove the directory (and <code class="docutils literal notranslate"><span class="pre">.dist-info</span></code>
directory) of the package name you don’t want to used the released version of
from the <code class="docutils literal notranslate"><span class="pre">site-packages</span></code> directory. Then Python will start using the
development version (provided you have installed that source with the <code class="docutils literal notranslate"><span class="pre">-e</span></code>
flag to <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span></code>).</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>dffml service dev entrypoints list dffml.operation
<span class="go">is_binary_pie = dffml_operations_binsec.operations:is_binary_pie.op -&gt; dffml-operations-binsec 0.0.1 (/home/user/.pyenv/versions/3.7.2/lib/python3.7/site-packages)</span>
<span class="go">pypi_package_json = shouldi.pypi:pypi_package_json -&gt; shouldi 0.0.1 (/home/user/Documents/python/dffml/examples/shouldi)</span>
<span class="go">clone_git_repo = dffml_feature_git.feature.operations:clone_git_repo -&gt; dffml-feature-git 0.2.0 (/home/user/Documents/python/dffml/feature/git)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="setuppy">
<h4><a class="toc-backref" href="#id19">setuppy</a><a class="headerlink" href="#setuppy" title="Permalink to this headline">¶</a></h4>
<p>Utilities for working with <code class="docutils literal notranslate"><span class="pre">setup.py</span></code> files.</p>
<div class="section" id="kwarg">
<h5><a class="toc-backref" href="#id20">kwarg</a><a class="headerlink" href="#kwarg" title="Permalink to this headline">¶</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">import</span></code> a <code class="docutils literal notranslate"><span class="pre">setup.py</span></code> file return the value of the specified keyword
argument.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>dffml service dev setuppy kwarg name model/tensorflow/setup.py
<span class="go">dffml-model-tensorflow</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="bump">
<h4><a class="toc-backref" href="#id21">bump</a><a class="headerlink" href="#bump" title="Permalink to this headline">¶</a></h4>
<p>Utilities for bumping version numbers.</p>
<div class="section" id="main">
<h5><a class="toc-backref" href="#id22">main</a><a class="headerlink" href="#main" title="Permalink to this headline">¶</a></h5>
<p>Update the version of DFFML used by all of the plugins.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">dffml service dev bump main</span>
</pre></div>
</div>
</div>
<div class="section" id="packages">
<h5><a class="toc-backref" href="#id23">packages</a><a class="headerlink" href="#packages" title="Permalink to this headline">¶</a></h5>
<p>Update the version number of a package or all packages. Increments the version
of each packages by the version string given.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">dffml service dev bump packages -log debug -skip dffml -- 0.0.1</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="plugins/service/http/index.html" class="btn btn-neutral float-right" title="HTTP API" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="plugins/dffml_service_cli.html" class="btn btn-neutral float-left" title="Services" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2019, Intel.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>