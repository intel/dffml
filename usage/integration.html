

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Automating Classification &mdash; DFFML 0.3.7 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/copybutton.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="DataFlow HTTP Deployment" href="dataflows.html" />
    <link rel="prev" title="Use Cases" href="index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> DFFML
          

          
          </a>

          
            
            
              <div class="version">
                0.3.7
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Introduction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../about.html">About</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../concepts/index.html">Concepts</a></li>
</ul>
<p class="caption"><span class="caption-text">Examples</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../quickstart/model.html">Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/index.html">Tutorials</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Use Cases</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Automating Classification</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#demo-app-setup">Demo App Setup</a></li>
<li class="toctree-l3"><a class="reference internal" href="#gathering-data">Gathering Data</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pulling-from-the-database">Pulling from the Database</a></li>
<li class="toctree-l3"><a class="reference internal" href="#training-our-model">Training our Model</a></li>
<li class="toctree-l3"><a class="reference internal" href="#making-a-prediction">Making a Prediction</a></li>
<li class="toctree-l3"><a class="reference internal" href="#modifying-the-legacy-app">Modifying the Legacy App</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="dataflows.html">DataFlow HTTP Deployment</a></li>
<li class="toctree-l2"><a class="reference internal" href="mnist.html">MNIST Handwriten Digits</a></li>
<li class="toctree-l2"><a class="reference internal" href="io.html">Prediction Using IO Operations</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../plugins/index.html">Plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cli.html">Command Line</a></li>
<li class="toctree-l1"><a class="reference internal" href="../plugins/service/http/index.html">HTTP API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/index.html">API Reference</a></li>
</ul>
<p class="caption"><span class="caption-text">Community</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://github.com/intel/dffml">GitHub</a></li>
<li class="toctree-l1"><a class="reference internal" href="../publications.html">Publications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contact.html">Contact Us</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributing/index.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">Changelog</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">DFFML</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="index.html">Use Cases</a> &raquo;</li>
        
      <li>Automating Classification</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            
              <a href="https://github.com/intel/dffml/blob/master/docs/usage/integration.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="automating-classification">
<h1>Automating Classification<a class="headerlink" href="#automating-classification" title="Permalink to this headline">¶</a></h1>
<p>This example will show you how to automate a manual classification process,
determining if a Git repo is maintained or abandoned. We’ll be integrating
Machine Learning into an existing legacy application.</p>
<p>For this example assume you are a very curious open source software people (if
you’re here you already are). Since you love looking at GitHub repos in your
free time, you long ago built a Python 2 based CGI web application where, every
time we came across a Git repo, you dug around, looked at the number of
committer, number of commits, etc. To come up with maintenance status. That
status being maintained, or unmaintained.</p>
<img alt="../_images/website-before.png" src="../_images/website-before.png" />
<p>Instead of manually classifying each repo, we’re going to put some machine
learning behind this little web app. The steps we’re going to follow here are
generic, they do not apply specifically to this Python 2 CGI setup, this is just
an example that was chosen because hopefully it’ll be an easy setup.</p>
<div class="section" id="demo-app-setup">
<h2>Demo App Setup<a class="headerlink" href="#demo-app-setup" title="Permalink to this headline">¶</a></h2>
<p>We’ll be using Python 2, 3.7, jq, and docker. So make sure you have all of those
installed. Python 2 is usually installed by default on most systems, your
package manager should have it if not.</p>
<p>Navigate to the <code class="docutils literal notranslate"><span class="pre">maintained</span></code> example, starting at the top directory of the
<code class="docutils literal notranslate"><span class="pre">dffml</span></code> source.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span><span class="nb">cd</span> examples/maintained/
</pre></div>
</div>
<p>Create a virtual environment for Python 3.7.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>python3.7 -m venv .venv
<span class="gp">$ </span>. .venv/bin/activate
</pre></div>
</div>
<p>Install DFFML.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>pip install -U dffml
</pre></div>
</div>
<p>Download the Python 2 client libraries for MySQL.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>python2 -m pip install -U --user <span class="se">\</span>
<span class="go">    https://dev.mysql.com/get/Downloads/Connector-Python/mysql-connector-python-8.0.16.tar.gz</span>
</pre></div>
</div>
<p>Start MariaDB (functionally very similar to MySQL which its a fork of).</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>docker run --rm -d --name maintained_db <span class="se">\</span>
<span class="go">    -e MYSQL_RANDOM_ROOT_PASSWORD=yes \</span>
<span class="go">    -e MYSQL_USER=user \</span>
<span class="go">    -e MYSQL_PASSWORD=pass \</span>
<span class="go">    -e MYSQL_DATABASE=db \</span>
<span class="go">    -p 3306:3306 \</span>
<span class="go">    mariadb:10</span>
</pre></div>
</div>
<p>Wait for the database to start. Run the following command until you see <code class="docutils literal notranslate"><span class="pre">ready</span>
<span class="pre">for</span> <span class="pre">connections</span></code> twice in the output.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>docker logs maintained_db <span class="m">2</span>&gt;<span class="p">&amp;</span><span class="m">1</span> <span class="p">|</span> grep <span class="s1">&#39;ready for&#39;</span>
<span class="go">2020-01-13 21:31:09 0 [Note] mysqld: ready for connections.</span>
<span class="go">2020-01-13 21:32:16 0 [Note] mysqld: ready for connections.</span>
</pre></div>
</div>
<p>Import the data. The data was pulled from a couple pages of GitHub search
results and randomly assigned a maintenance status. It is completely
meaningless.</p>
<p>If you want results that mean anything, you could discard all of this data and
use the web app to create a meaningful dataset by manually going through and
setting the status of repos.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>docker run -i --rm --net<span class="o">=</span>host mariadb:10 mysql <span class="se">\</span>
<span class="go">    -h127.0.0.1 \</span>
<span class="go">    -uuser \</span>
<span class="go">    -ppass \</span>
<span class="go">    --database db &lt; db.sql</span>
</pre></div>
</div>
<p>Fire up the CGI server. Yes, this is Python 3 now, but we’re assuming there
was a legacy setup in place, the CGI server could just as well have been running
PHP. In fact a php app that does the same thing would follow these same
integration steps.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>python -m http.server --cgi <span class="m">8000</span>
</pre></div>
</div>
</div>
<div class="section" id="gathering-data">
<h2>Gathering Data<a class="headerlink" href="#gathering-data" title="Permalink to this headline">¶</a></h2>
<p>We now have our dataset of git repos and their maintenance statuses in our web
app. If you go to <a class="reference external" href="http://127.0.0.1:8000/">http://127.0.0.1:8000/</a> you should see it.</p>
<p>Before we can train a model on this dataset, we need to transform it into
something that could be feed to a model. Right now all we have is URLs to git
repos.</p>
<p>Lets pull down that list of repos.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>curl <span class="s1">&#39;http://127.0.0.1:8000/cgi-bin/api.py?action=dump&#39;</span> <span class="se">\</span>
<span class="go">    | jq -r &#39;keys[]&#39; | tee /tmp/urls</span>
<span class="go">https://github.com/2bt/vmTetris.git</span>
<span class="go">https://github.com/AntoineMaillard06/Tetris.git</span>
<span class="go">https://github.com/Apolotary/My-tetris-on-python.git</span>
<span class="go">https://github.com/ArthanJans/TetrisPi.git</span>
<span class="go">https://github.com/CRAFT-THU/tetris.git</span>
</pre></div>
</div>
<p>We’re going to run these repos through DFFML’s data flow orchestrator. We’ll
tell the orchestrator to run certain <code class="docutils literal notranslate"><span class="pre">Operations</span></code> on each one of the URLs.
Those <code class="docutils literal notranslate"><span class="pre">Operations</span></code> will scrape data that is representative of the repo’s
maintenance, we can then feed that data into a machine learning model.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This example is centered around machine learning. We’ll be using DataFlows
to collect a dataset for training, testing, and prediction. For a deeper
understanding of Operations and DataFlows, see the
<a class="reference internal" href="../tutorials/operations.html"><span class="doc">New Operations Tutorial</span></a>.</p>
</div>
<p>The operations we’re going to use are a part of <code class="docutils literal notranslate"><span class="pre">dffml-feature-git</span></code>, which is
a separate Python package from DFFML (although maintained within the same repo)
which we can install via <code class="docutils literal notranslate"><span class="pre">pip</span></code>. We’ll also use the <code class="docutils literal notranslate"><span class="pre">yaml</span></code> config loader,
since that creates more user friendly configs than <code class="docutils literal notranslate"><span class="pre">json</span></code>.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>pip install -U dffml-feature-git dffml-config-yaml
</pre></div>
</div>
<p>The git operations / features rely on <code class="docutils literal notranslate"><span class="pre">tokei</span></code>. We need to download and install
it first.</p>
<p>On Linux</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>curl -sSL <span class="s1">&#39;https://github.com/XAMPPRocky/tokei/releases/download/v10.1.1/tokei-v10.1.1-x86_64-apple-darwin.tar.gz&#39;</span> <span class="se">\</span>
<span class="go">  | tar -xvz &amp;&amp; \</span>
<span class="go">  echo &#39;22699e16e71f07ff805805d26ee86ecb9b1052d7879350f7eb9ed87beb0e6b84fbb512963d01b75cec8e80532e4ea29a tokei&#39; | sha384sum -c - &amp;&amp; \</span>
<span class="go">  sudo mv tokei /usr/local/bin/</span>
</pre></div>
</div>
<p>On OSX</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>curl -sSL <span class="s1">&#39;https://github.com/XAMPPRocky/tokei/releases/download/v10.1.1/tokei-v10.1.1-x86_64-apple-darwin.tar.gz&#39;</span> <span class="se">\</span>
<span class="go">  | tar -xvz &amp;&amp; \</span>
<span class="go">  echo &#39;8c8a1d8d8dd4d8bef93dabf5d2f6e27023777f8553393e269765d7ece85e68837cba4374a2615d83f071dfae22ba40e2 tokei&#39; | sha384sum -c - &amp;&amp; \</span>
<span class="go">  sudo mv tokei /usr/local/bin/</span>
</pre></div>
</div>
<p>Operations are just Python functions, or classes. They define a routine which
will be run concurrently with other operations. Here’s an example of the
<code class="docutils literal notranslate"><span class="pre">git_commits</span></code> operation, which will find the number of commits within a date
range.</p>
<p><strong>feature/git/dffml_feature_git/feature/operations.py</strong></p>
<div class="highlight-default notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="nd">@op</span><span class="p">(</span>
    <span class="n">inputs</span><span class="o">=</span><span class="p">{</span>
        <span class="s2">&quot;repo&quot;</span><span class="p">:</span> <span class="n">git_repository</span><span class="p">,</span>
        <span class="s2">&quot;branch&quot;</span><span class="p">:</span> <span class="n">git_branch</span><span class="p">,</span>
        <span class="s2">&quot;start_end&quot;</span><span class="p">:</span> <span class="n">date_pair</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="n">outputs</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;commits&quot;</span><span class="p">:</span> <span class="n">commit_count</span><span class="p">},</span>
<span class="p">)</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">git_commits</span><span class="p">(</span><span class="n">repo</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span> <span class="n">branch</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">start_end</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]):</span>
    <span class="n">start</span><span class="p">,</span> <span class="n">end</span> <span class="o">=</span> <span class="n">start_end</span>
    <span class="n">commit_count</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">proc</span> <span class="o">=</span> <span class="k">await</span> <span class="n">create</span><span class="p">(</span>
        <span class="s2">&quot;git&quot;</span><span class="p">,</span>
        <span class="s2">&quot;log&quot;</span><span class="p">,</span>
        <span class="s2">&quot;--oneline&quot;</span><span class="p">,</span>
        <span class="s2">&quot;--before&quot;</span><span class="p">,</span>
        <span class="n">start</span><span class="p">,</span>
        <span class="s2">&quot;--after&quot;</span><span class="p">,</span>
        <span class="n">end</span><span class="p">,</span>
        <span class="n">branch</span><span class="p">,</span>
        <span class="n">cwd</span><span class="o">=</span><span class="n">repo</span><span class="o">.</span><span class="n">directory</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">while</span> <span class="ow">not</span> <span class="n">proc</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">at_eof</span><span class="p">():</span>
        <span class="n">line</span> <span class="o">=</span> <span class="k">await</span> <span class="n">proc</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">line</span> <span class="o">!=</span> <span class="sa">b</span><span class="s2">&quot;&quot;</span><span class="p">:</span>
            <span class="n">commit_count</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">await</span> <span class="n">stop</span><span class="p">(</span><span class="n">proc</span><span class="p">)</span>
    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;commits&quot;</span><span class="p">:</span> <span class="n">commit_count</span><span class="p">}</span>


<span class="nd">@op</span><span class="p">(</span>
    <span class="n">inputs</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;author_lines&quot;</span><span class="p">:</span> <span class="n">author_line_count</span><span class="p">},</span>
</pre></div>
</td></tr></table></div>
<p>Since operations are run concurrently with each other, DFFML manages locking of
input data, such as git repositories. This is done via <code class="docutils literal notranslate"><span class="pre">Definitions</span></code> which are
the variables used as values in the <code class="docutils literal notranslate"><span class="pre">input</span></code> and <code class="docutils literal notranslate"><span class="pre">output</span></code> dictionaries. We
link together all of the operations in a <code class="docutils literal notranslate"><span class="pre">DataFlow</span></code>. The pink boxes in the
diagram below are the inputs to the network. The purple are the different
operations. Arrows show how data moves between operations.</p>
<img alt="Diagram showing Dataflow" src="../_images/integration_dataflow.svg" /><p>We can also visualize how the individual inputs and outputs are linked together.
Inputs and outputs of the same <code class="docutils literal notranslate"><span class="pre">Definition</span></code> can be linked together
automatically.</p>
<img alt="Diagram showing detailed version of Dataflow" src="../_images/integration_dataflow_complex.svg" /><p>We’re going to use the operations provided in <code class="docutils literal notranslate"><span class="pre">dffml-feature-git</span></code> to gather
our dataset. The following command writes all the operations we’re using to the
file <code class="docutils literal notranslate"><span class="pre">/tmp/operations</span></code>.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>cat &gt; /tmp/operations &lt;&lt;EOF
<span class="go">group_by</span>
<span class="go">quarters_back_to_date</span>
<span class="go">check_if_valid_git_repository_URL</span>
<span class="go">clone_git_repo</span>
<span class="go">git_repo_default_branch</span>
<span class="go">git_repo_checkout</span>
<span class="go">git_repo_commit_from_date</span>
<span class="go">git_repo_author_lines_for_dates</span>
<span class="go">work</span>
<span class="go">git_repo_release</span>
<span class="go">git_commits</span>
<span class="go">count_authors</span>
<span class="go">cleanup_git_repo</span>
<span class="go">EOF</span>
</pre></div>
</div>
<p>We then create a <code class="docutils literal notranslate"><span class="pre">DataFlow</span></code> description of how they all link together.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>dffml dataflow create -config yaml <span class="k">$(</span>cat /tmp/operations<span class="k">)</span> <span class="se">\</span>
<span class="go">    &gt; cgi-bin/dataflow.yaml</span>
</pre></div>
</div>
<p>The inputs and outputs of operations within a running DataFlow are organized by
contexts. The context for our dataset generation will be the source URL to the
Git repo.</p>
<ul class="simple">
<li><p>We will be providing the source URL to the git repo on a per-repo basis.</p></li>
<li><p>We provide the start date of the zeroith quarter, and 10 instances of quarter,
since for each operation, every possible permutation of inputs will be run,
<code class="docutils literal notranslate"><span class="pre">quarters_back_to_date</span></code> is going to take the start date, and the quarter,
and produce a date range for that quarter.</p></li>
<li><p>We’ll also need to provide an input to the output operation <code class="docutils literal notranslate"><span class="pre">group_by_spec</span></code>.
Output operations decide what data generated should be used as feature data,
and present it in a usable format.</p>
<ul>
<li><p>Here we’re telling the <code class="docutils literal notranslate"><span class="pre">group_by</span></code> operation to create feature data where
the <code class="docutils literal notranslate"><span class="pre">author_count</span></code>, <code class="docutils literal notranslate"><span class="pre">work_spread</span></code> and <code class="docutils literal notranslate"><span class="pre">commit_count</span></code> are grouped by
the quarter they were generated for.</p></li>
</ul>
</li>
</ul>
<p><strong>cgi-bin/dataflow.yaml</strong></p>
<div class="highlight-default notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">seed</span><span class="p">:</span>
<span class="o">-</span> <span class="n">definition</span><span class="p">:</span> <span class="n">group_by_spec</span>
  <span class="n">value</span><span class="p">:</span>
    <span class="n">authors</span><span class="p">:</span>
      <span class="n">group</span><span class="p">:</span> <span class="n">author_count</span>
      <span class="n">by</span><span class="p">:</span> <span class="n">quarter</span>
      <span class="n">fill</span><span class="p">:</span> <span class="mi">0</span>
    <span class="n">work</span><span class="p">:</span>
      <span class="n">group</span><span class="p">:</span> <span class="n">work_spread</span>
      <span class="n">by</span><span class="p">:</span> <span class="n">quarter</span>
      <span class="n">fill</span><span class="p">:</span> <span class="mi">0</span>
    <span class="n">commits</span><span class="p">:</span>
      <span class="n">group</span><span class="p">:</span> <span class="n">commit_count</span>
      <span class="n">by</span><span class="p">:</span> <span class="n">quarter</span>
      <span class="n">fill</span><span class="p">:</span> <span class="mi">0</span>
<span class="o">-</span> <span class="n">definition</span><span class="p">:</span> <span class="n">quarter_start_date</span>
  <span class="n">value</span><span class="p">:</span> <span class="mi">2019</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">29</span> <span class="mi">13</span><span class="p">:</span><span class="mi">24</span>
<span class="o">-</span> <span class="n">definition</span><span class="p">:</span> <span class="n">quarter</span>
  <span class="n">value</span><span class="p">:</span> <span class="mi">0</span>
<span class="o">-</span> <span class="n">definition</span><span class="p">:</span> <span class="n">quarter</span>
  <span class="n">value</span><span class="p">:</span> <span class="mi">1</span>
<span class="o">-</span> <span class="n">definition</span><span class="p">:</span> <span class="n">quarter</span>
  <span class="n">value</span><span class="p">:</span> <span class="mi">2</span>
<span class="o">-</span> <span class="n">definition</span><span class="p">:</span> <span class="n">quarter</span>
  <span class="n">value</span><span class="p">:</span> <span class="mi">3</span>
<span class="o">-</span> <span class="n">definition</span><span class="p">:</span> <span class="n">quarter</span>
  <span class="n">value</span><span class="p">:</span> <span class="mi">4</span>
<span class="o">-</span> <span class="n">definition</span><span class="p">:</span> <span class="n">quarter</span>
  <span class="n">value</span><span class="p">:</span> <span class="mi">5</span>
<span class="o">-</span> <span class="n">definition</span><span class="p">:</span> <span class="n">quarter</span>
  <span class="n">value</span><span class="p">:</span> <span class="mi">6</span>
<span class="o">-</span> <span class="n">definition</span><span class="p">:</span> <span class="n">quarter</span>
  <span class="n">value</span><span class="p">:</span> <span class="mi">7</span>
<span class="o">-</span> <span class="n">definition</span><span class="p">:</span> <span class="n">quarter</span>
  <span class="n">value</span><span class="p">:</span> <span class="mi">8</span>
<span class="o">-</span> <span class="n">definition</span><span class="p">:</span> <span class="n">quarter</span>
  <span class="n">value</span><span class="p">:</span> <span class="mi">9</span>
</pre></div>
</td></tr></table></div>
<p>The speed of the following command depends on your internet connection, it may
take 2 minutes, it may take more. All the git repos in <code class="docutils literal notranslate"><span class="pre">/tmp/urls</span></code> will be
downloaded, this will also take up space in <code class="docutils literal notranslate"><span class="pre">/tmp</span></code>, they will be cleaned up
automatically.</p>
<p>This command runs the dataflow on a set of repos, that set being the URLs in
<code class="docutils literal notranslate"><span class="pre">/tmp/urls</span></code>. The data generated on those repos is then being saved to
<code class="docutils literal notranslate"><span class="pre">/tmp/data.json</span></code> (tagged as the <code class="docutils literal notranslate"><span class="pre">gathered</span></code> data source).</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>dffml dataflow run records <span class="nb">set</span> <span class="se">\</span>
<span class="go">    -keys $(cat /tmp/urls) \</span>
<span class="go">    -record-def URL \</span>
<span class="go">    -dataflow cgi-bin/dataflow.yaml \</span>
<span class="go">    -sources gathered=json \</span>
<span class="go">    -source-filename /tmp/data.json \</span>
<span class="go">    -no-strict</span>
<span class="go">[</span>
<span class="go">    ... results ...</span>
<span class="go">    {</span>
<span class="go">        &quot;extra&quot;: {},</span>
<span class="go">        &quot;features&quot;: {</span>
<span class="go">            &quot;authors&quot;: [</span>
<span class="go">                0,</span>
<span class="go">                2,</span>
<span class="go">                0,</span>
<span class="go">                0,</span>
<span class="go">                0,</span>
<span class="go">                0,</span>
<span class="go">                0,</span>
<span class="go">                0,</span>
<span class="go">                0,</span>
<span class="go">                0</span>
<span class="go">            ],</span>
<span class="go">            &quot;commits&quot;: [</span>
<span class="go">                0,</span>
<span class="go">                12,</span>
<span class="go">                0,</span>
<span class="go">                0,</span>
<span class="go">                0,</span>
<span class="go">                0,</span>
<span class="go">                0,</span>
<span class="go">                0,</span>
<span class="go">                0,</span>
<span class="go">                0</span>
<span class="go">            ],</span>
<span class="go">            &quot;work&quot;: [</span>
<span class="go">                0,</span>
<span class="go">                4,</span>
<span class="go">                0,</span>
<span class="go">                0,</span>
<span class="go">                0,</span>
<span class="go">                0,</span>
<span class="go">                0,</span>
<span class="go">                0,</span>
<span class="go">                0,</span>
<span class="go">                0</span>
<span class="go">            ]</span>
<span class="go">        },</span>
<span class="go">        &quot;last_updated&quot;: &quot;2019-10-25T01:44:50Z&quot;,</span>
<span class="go">        &quot;key&quot;: &quot;https://github.com/AntoineMaillard06/Tetris.git&quot;</span>
<span class="go">    }</span>
<span class="go">]</span>
</pre></div>
</div>
</div>
<div class="section" id="pulling-from-the-database">
<h2>Pulling from the Database<a class="headerlink" href="#pulling-from-the-database" title="Permalink to this headline">¶</a></h2>
<p>Now that we’ve gathered our data. We want to re-associate it with it’s
classifications. To do this we need to access the database.</p>
<p>By copying the example source implementation
<code class="docutils literal notranslate"><span class="pre">examples/source/custom_source.py</span></code> we can quickly modify it to use the
<code class="docutils literal notranslate"><span class="pre">aiomysql</span></code> connector rather than sqlite.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The following source code is one of many examples of how you might write a
source to interact with your existing database. If you don’t have any
existing logic and just want to store data in MySQL, you chould check out
the MySQL <a class="reference internal" href="../plugins/dffml_source.html"><span class="doc">Sources</span></a> plugin.</p>
</div>
<p><strong>demoapp/source.py</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">aiomysql</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">AsyncIterator</span><span class="p">,</span> <span class="n">NamedTuple</span><span class="p">,</span> <span class="n">Dict</span>

<span class="kn">from</span> <span class="nn">dffml.base</span> <span class="kn">import</span> <span class="n">BaseConfig</span>
<span class="kn">from</span> <span class="nn">dffml.record</span> <span class="kn">import</span> <span class="n">Record</span>
<span class="kn">from</span> <span class="nn">dffml.source.source</span> <span class="kn">import</span> <span class="n">BaseSourceContext</span><span class="p">,</span> <span class="n">BaseSource</span>
<span class="kn">from</span> <span class="nn">dffml.util.cli.arg</span> <span class="kn">import</span> <span class="n">Arg</span>
<span class="kn">from</span> <span class="nn">dffml.util.entrypoint</span> <span class="kn">import</span> <span class="n">entrypoint</span>


<span class="k">class</span> <span class="nc">DemoAppSourceConfig</span><span class="p">(</span><span class="n">BaseConfig</span><span class="p">,</span> <span class="n">NamedTuple</span><span class="p">):</span>
    <span class="n">host</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">port</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">user</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">password</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">db</span><span class="p">:</span> <span class="nb">str</span>


<span class="k">class</span> <span class="nc">DemoAppSourceContext</span><span class="p">(</span><span class="n">BaseSourceContext</span><span class="p">):</span>
    <span class="k">async</span> <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record</span><span class="p">:</span> <span class="n">Record</span><span class="p">):</span>
        <span class="n">db</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">conn</span>
        <span class="c1"># Just dump it (if you want a setup the queries easily, then you need to</span>
        <span class="c1"># massage the columns in this table to your liking, and perhaps add more</span>
        <span class="c1"># tables.</span>
        <span class="n">marshall</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">record</span><span class="o">.</span><span class="n">dict</span><span class="p">())</span>
        <span class="k">await</span> <span class="n">db</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
            <span class="s2">&quot;INSERT INTO ml_data (key, json) VALUES(</span><span class="si">%s</span><span class="s2">, </span><span class="si">%s</span><span class="s2">) &quot;</span>
            <span class="s2">&quot;ON DUPLICATE KEY UPDATE json = </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="p">(</span><span class="n">record</span><span class="o">.</span><span class="n">key</span><span class="p">,</span> <span class="n">marshall</span><span class="p">,</span> <span class="n">marshall</span><span class="p">),</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;updated: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">marshall</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;update: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">record</span><span class="p">(</span><span class="n">record</span><span class="o">.</span><span class="n">key</span><span class="p">))</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">records</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AsyncIterator</span><span class="p">[</span><span class="n">Record</span><span class="p">]:</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT key FROM `status`&quot;</span><span class="p">)</span>
        <span class="n">keys</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">row</span><span class="p">:</span> <span class="n">row</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">conn</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()))</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT key FROM `ml_data`&quot;</span><span class="p">)</span>
        <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">row</span><span class="p">:</span> <span class="n">keys</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">conn</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()))</span>
        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">keys</span><span class="p">:</span>
            <span class="k">yield</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">record</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">record</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">record</span> <span class="o">=</span> <span class="n">Record</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
        <span class="n">db</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">conn</span>
        <span class="c1"># Get features</span>
        <span class="k">await</span> <span class="n">db</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT json FROM ml_data WHERE key=</span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">key</span><span class="p">,))</span>
        <span class="n">dump</span> <span class="o">=</span> <span class="k">await</span> <span class="n">db</span><span class="o">.</span><span class="n">fetchone</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">dump</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">dump</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">record</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">Record</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">dump</span><span class="p">[</span><span class="mi">0</span><span class="p">])))</span>
        <span class="k">await</span> <span class="n">db</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
            <span class="s2">&quot;SELECT maintained FROM `status` WHERE key=</span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">key</span><span class="p">,)</span>
        <span class="p">)</span>
        <span class="n">maintained</span> <span class="o">=</span> <span class="k">await</span> <span class="n">db</span><span class="o">.</span><span class="n">fetchone</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">maintained</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">maintained</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">record</span><span class="o">.</span><span class="n">evaluated</span><span class="p">({</span><span class="s2">&quot;maintained&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">maintained</span><span class="p">[</span><span class="mi">0</span><span class="p">])})</span>
        <span class="k">return</span> <span class="n">record</span>

    <span class="k">async</span> <span class="k">def</span> <span class="fm">__aenter__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;DemoAppSourceContext&quot;</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__conn</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">conn</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">__conn</span><span class="o">.</span><span class="fm">__aenter__</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">async</span> <span class="k">def</span> <span class="fm">__aexit__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exc_type</span><span class="p">,</span> <span class="n">exc_value</span><span class="p">,</span> <span class="n">traceback</span><span class="p">):</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">__conn</span><span class="o">.</span><span class="fm">__aexit__</span><span class="p">(</span><span class="n">exc_type</span><span class="p">,</span> <span class="n">exc_value</span><span class="p">,</span> <span class="n">traceback</span><span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>


<span class="nd">@entrypoint</span><span class="p">(</span><span class="s2">&quot;demoapp&quot;</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">DemoAppSource</span><span class="p">(</span><span class="n">BaseSource</span><span class="p">):</span>

    <span class="n">CONTEXT</span> <span class="o">=</span> <span class="n">DemoAppSourceContext</span>

    <span class="k">async</span> <span class="k">def</span> <span class="fm">__aenter__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;DemoAppSource&quot;</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pool</span> <span class="o">=</span> <span class="k">await</span> <span class="n">aiomysql</span><span class="o">.</span><span class="n">create_pool</span><span class="p">(</span>
            <span class="n">host</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">host</span><span class="p">,</span>
            <span class="n">port</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">port</span><span class="p">,</span>
            <span class="n">user</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">user</span><span class="p">,</span>
            <span class="n">password</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">password</span><span class="p">,</span>
            <span class="n">db</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">db</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__db</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pool</span><span class="o">.</span><span class="n">acquire</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">db</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">__db</span><span class="o">.</span><span class="fm">__aenter__</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">async</span> <span class="k">def</span> <span class="fm">__aexit__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exc_type</span><span class="p">,</span> <span class="n">exc_value</span><span class="p">,</span> <span class="n">traceback</span><span class="p">):</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">__db</span><span class="o">.</span><span class="fm">__aexit__</span><span class="p">(</span><span class="n">exc_type</span><span class="p">,</span> <span class="n">exc_value</span><span class="p">,</span> <span class="n">traceback</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pool</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">pool</span><span class="o">.</span><span class="n">wait_closed</span><span class="p">()</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">args</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="o">*</span><span class="n">above</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Arg</span><span class="p">]:</span>
        <span class="bp">cls</span><span class="o">.</span><span class="n">config_set</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">above</span><span class="p">,</span> <span class="s2">&quot;host&quot;</span><span class="p">,</span> <span class="n">Arg</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="s2">&quot;127.0.0.1&quot;</span><span class="p">))</span>
        <span class="bp">cls</span><span class="o">.</span><span class="n">config_set</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">above</span><span class="p">,</span> <span class="s2">&quot;port&quot;</span><span class="p">,</span> <span class="n">Arg</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">3306</span><span class="p">))</span>
        <span class="bp">cls</span><span class="o">.</span><span class="n">config_set</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">above</span><span class="p">,</span> <span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="n">Arg</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="s2">&quot;user&quot;</span><span class="p">))</span>
        <span class="bp">cls</span><span class="o">.</span><span class="n">config_set</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">above</span><span class="p">,</span> <span class="s2">&quot;password&quot;</span><span class="p">,</span> <span class="n">Arg</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="s2">&quot;pass&quot;</span><span class="p">))</span>
        <span class="bp">cls</span><span class="o">.</span><span class="n">config_set</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">above</span><span class="p">,</span> <span class="s2">&quot;db&quot;</span><span class="p">,</span> <span class="n">Arg</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="s2">&quot;db&quot;</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">args</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">config</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">config</span><span class="p">,</span> <span class="o">*</span><span class="n">above</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">DemoAppSourceConfig</span><span class="p">(</span>
            <span class="n">host</span><span class="o">=</span><span class="bp">cls</span><span class="o">.</span><span class="n">config_get</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">above</span><span class="p">,</span> <span class="s2">&quot;host&quot;</span><span class="p">),</span>
            <span class="n">port</span><span class="o">=</span><span class="bp">cls</span><span class="o">.</span><span class="n">config_get</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">above</span><span class="p">,</span> <span class="s2">&quot;port&quot;</span><span class="p">),</span>
            <span class="n">user</span><span class="o">=</span><span class="bp">cls</span><span class="o">.</span><span class="n">config_get</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">above</span><span class="p">,</span> <span class="s2">&quot;user&quot;</span><span class="p">),</span>
            <span class="n">password</span><span class="o">=</span><span class="bp">cls</span><span class="o">.</span><span class="n">config_get</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">above</span><span class="p">,</span> <span class="s2">&quot;password&quot;</span><span class="p">),</span>
            <span class="n">db</span><span class="o">=</span><span class="bp">cls</span><span class="o">.</span><span class="n">config_get</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">above</span><span class="p">,</span> <span class="s2">&quot;db&quot;</span><span class="p">),</span>
        <span class="p">)</span>
</pre></div>
</div>
<p>We then make sure to register our new source with Pythons <code class="docutils literal notranslate"><span class="pre">entrypoint</span></code> system,
to make it accessable to the command line interface.</p>
<p><strong>setup.py</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="n">entry_points</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;dffml.source&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;demoapp = demoapp.source:DemoAppSource&quot;</span><span class="p">]},</span>
</pre></div>
</div>
<p>Let’s now install it so we can use it within the DFFML CLI.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>pip install -e .
</pre></div>
</div>
<p>The source we’ve written uses a new table in the database. Lets create it.</p>
<p><strong>db_ml.sql</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>DROP TABLE IF EXISTS `ml_data`;
CREATE TABLE IF NOT EXISTS `ml_data` (
  `key` VARCHAR(1000) PRIMARY KEY NOT NULL,
  `json` text
);
</pre></div>
</div>
<p>You can pipe that query in with bash like we did the first time.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>docker run -i --rm --net<span class="o">=</span>host mariadb:10 mysql <span class="se">\</span>
<span class="go">    -h127.0.0.1 \</span>
<span class="go">    -uuser \</span>
<span class="go">    -ppass \</span>
<span class="go">    --database db &lt; db_ml.sql</span>
</pre></div>
</div>
<p>Now we’ll take the data we stored in the json file and merge it back into the
database.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>dffml merge <span class="nv">db</span><span class="o">=</span>demoapp <span class="nv">gathered</span><span class="o">=</span>json <span class="se">\</span>
<span class="go">    -source-gathered-filename /tmp/data.json -log debug</span>
</pre></div>
</div>
<p>List all the repos in the database to confirm all data and classifications show
up as expected.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>dffml list records -sources <span class="nv">db</span><span class="o">=</span>demoapp
</pre></div>
</div>
</div>
<div class="section" id="training-our-model">
<h2>Training our Model<a class="headerlink" href="#training-our-model" title="Permalink to this headline">¶</a></h2>
<p>The model we’ll be using is a part of <code class="docutils literal notranslate"><span class="pre">dffml-model-tensorflow</span></code>, which is another
separate Python package from DFFML (although maintained within the same repo)
which we can install via <code class="docutils literal notranslate"><span class="pre">pip</span></code>.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>pip install -U dffml-model-tensorflow
</pre></div>
</div>
<p>The model is a generic wrapper around Tensorflow’s DNN estimator. We can use it
to train on our dataset.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>dffml train all <span class="se">\</span>
<span class="go">    -model tfdnnc \</span>
<span class="go">    -model-epochs 400 \</span>
<span class="go">    -model-steps 4000 \</span>
<span class="go">    -model-predict maintained:str:1 \</span>
<span class="go">    -model-classifications 0 1 \</span>
<span class="go">    -sources db=demoapp \</span>
<span class="go">    -model-features \</span>
<span class="go">      authors:int:10 \</span>
<span class="go">      commits:int:10 \</span>
<span class="go">      work:int:10 \</span>
<span class="go">    -log debug \</span>
<span class="go">    -update</span>
</pre></div>
</div>
<p>Now let’s assess the accuracy, remember, this is bogus data so this number is
meaningless unless you threw out the dataset and put in real classifications.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>dffml accuracy <span class="se">\</span>
<span class="go">    -model tfdnnc \</span>
<span class="go">    -model-predict maintained:str:1 \</span>
<span class="go">    -model-classifications 0 1 \</span>
<span class="go">    -sources db=demoapp \</span>
<span class="go">    -model-features \</span>
<span class="go">      authors:int:10 \</span>
<span class="go">      commits:int:10 \</span>
<span class="go">      work:int:10 \</span>
<span class="go">    -log critical</span>
<span class="go">0.4722222089767456</span>
</pre></div>
</div>
<p>The accuracy is 47.22%.</p>
</div>
<div class="section" id="making-a-prediction">
<h2>Making a Prediction<a class="headerlink" href="#making-a-prediction" title="Permalink to this headline">¶</a></h2>
<p>Run the operations on the new repo: <code class="docutils literal notranslate"><span class="pre">https://github.com/intel/dffml.git</span></code></p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>dffml dataflow run records <span class="nb">set</span> <span class="se">\</span>
<span class="go">    -keys https://github.com/intel/dffml.git \</span>
<span class="go">    -record-def URL \</span>
<span class="go">    -dataflow cgi-bin/dataflow.yaml \</span>
<span class="go">    -sources db=demoapp</span>
</pre></div>
</div>
<p>Now that we have the data for the new repo, ask the model for a prediction.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>dffml predict record <span class="se">\</span>
<span class="go">    -keys https://github.com/intel/dffml.git \</span>
<span class="go">    -model tfdnnc \</span>
<span class="go">    -model-predict maintained:str:1 \</span>
<span class="go">    -model-classifications 0 1 \</span>
<span class="go">    -sources db=demoapp \</span>
<span class="go">    -model-features \</span>
<span class="go">      authors:int:10 \</span>
<span class="go">      commits:int:10 \</span>
<span class="go">      work:int:10 \</span>
<span class="go">    -log critical \</span>
<span class="go">    -update</span>
<span class="go">[</span>
<span class="go">    {</span>
<span class="go">        &quot;extra&quot;: {},</span>
<span class="go">        &quot;features&quot;: {</span>
<span class="go">            &quot;authors&quot;: [</span>
<span class="go">                5,</span>
<span class="go">                0,</span>
<span class="go">                0,</span>
<span class="go">                0,</span>
<span class="go">                0,</span>
<span class="go">                0,</span>
<span class="go">                0,</span>
<span class="go">                0,</span>
<span class="go">                0,</span>
<span class="go">                0</span>
<span class="go">            ],</span>
<span class="go">            &quot;commits&quot;: [</span>
<span class="go">                39,</span>
<span class="go">                0,</span>
<span class="go">                0,</span>
<span class="go">                0,</span>
<span class="go">                0,</span>
<span class="go">                0,</span>
<span class="go">                0,</span>
<span class="go">                0,</span>
<span class="go">                0,</span>
<span class="go">                0</span>
<span class="go">            ],</span>
<span class="go">            &quot;work&quot;: [</span>
<span class="go">                4,</span>
<span class="go">                0,</span>
<span class="go">                0,</span>
<span class="go">                0,</span>
<span class="go">                0,</span>
<span class="go">                0,</span>
<span class="go">                0,</span>
<span class="go">                0,</span>
<span class="go">                0,</span>
<span class="go">                0</span>
<span class="go">            ]</span>
<span class="go">        },</span>
<span class="go">        &quot;last_updated&quot;: &quot;2019-05-23T10:33:03Z&quot;,</span>
<span class="go">        &quot;prediction&quot;: {</span>
<span class="go">            &quot;value&quot;: &quot;0&quot;,</span>
<span class="go">            &quot;confidence&quot;: 1.0</span>
<span class="go">        },</span>
<span class="go">        &quot;key&quot;: &quot;https://github.com/intel/dffml.git&quot;</span>
<span class="go">    }</span>
<span class="go">]</span>
</pre></div>
</div>
</div>
<div class="section" id="modifying-the-legacy-app">
<h2>Modifying the Legacy App<a class="headerlink" href="#modifying-the-legacy-app" title="Permalink to this headline">¶</a></h2>
<p>Now let’s add a ‘Predict’ button to the app. The button will trigger the
operations to be run on the new URL, and then the prediction. The demo app will
then take the predicted classification and record that as the classification in
the database.</p>
<p><strong>index.html</strong></p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Submit or change the maintenance status of a repo.<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">input</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;URL&quot;</span> <span class="na">placeholder</span><span class="o">=</span><span class="s">&quot;git://server.git/repo&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">input</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">button</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;maintained&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;good&quot;</span><span class="p">&gt;</span>Maintained<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">button</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;unmaintained&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;dangerous&quot;</span><span class="p">&gt;</span>Unmaintained<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">button</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;predict&quot;</span><span class="p">&gt;</span>Predict<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>The predict button will trigger an HTTP call to the CGI API. The CGI script will
run the same commands we just ran on the command line, and parse the output,
which is in JSON format, and set the resulting prediction classification in the
database.</p>
<p><strong>cgi-bin/api.py</strong></p>
<div class="highlight-default notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span>    <span class="n">today</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%Y-%m-</span><span class="si">%d</span><span class="s1"> %H:%M&#39;</span><span class="p">)</span>
    <span class="n">subprocess</span><span class="o">.</span><span class="n">check_call</span><span class="p">([</span>
        <span class="s2">&quot;dffml&quot;</span><span class="p">,</span> <span class="s2">&quot;dataflow&quot;</span><span class="p">,</span> <span class="s2">&quot;run&quot;</span><span class="p">,</span> <span class="s2">&quot;records&quot;</span><span class="p">,</span> <span class="s2">&quot;set&quot;</span><span class="p">,</span>
        <span class="s2">&quot;-keys&quot;</span><span class="p">,</span> <span class="n">query</span><span class="p">[</span><span class="s1">&#39;URL&#39;</span><span class="p">],</span>
        <span class="s2">&quot;-record-def&quot;</span><span class="p">,</span> <span class="s2">&quot;URL&quot;</span><span class="p">,</span>
        <span class="s2">&quot;-dataflow&quot;</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="vm">__file__</span><span class="p">),</span> <span class="s2">&quot;dataflow.yaml&quot;</span><span class="p">),</span>
        <span class="s2">&quot;-sources&quot;</span><span class="p">,</span> <span class="s2">&quot;db=demoapp&quot;</span><span class="p">,</span>
        <span class="p">])</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">check_output</span><span class="p">([</span>
        <span class="s1">&#39;dffml&#39;</span><span class="p">,</span> <span class="s1">&#39;predict&#39;</span><span class="p">,</span> <span class="s1">&#39;record&#39;</span><span class="p">,</span>
        <span class="s1">&#39;-keys&#39;</span><span class="p">,</span> <span class="n">query</span><span class="p">[</span><span class="s1">&#39;URL&#39;</span><span class="p">],</span>
        <span class="s1">&#39;-model&#39;</span><span class="p">,</span> <span class="s1">&#39;tfdnnc&#39;</span><span class="p">,</span>
        <span class="s1">&#39;-model-predict&#39;</span><span class="p">,</span> <span class="s1">&#39;maintained&#39;</span><span class="p">,</span>
        <span class="s1">&#39;-model-classifications&#39;</span><span class="p">,</span> <span class="s1">&#39;0&#39;</span><span class="p">,</span> <span class="s1">&#39;1&#39;</span><span class="p">,</span>
        <span class="s1">&#39;-sources&#39;</span><span class="p">,</span> <span class="s1">&#39;db=demoapp&#39;</span><span class="p">,</span>
        <span class="s1">&#39;-model-features&#39;</span><span class="p">,</span>
        <span class="s1">&#39;authors:int:10&#39;</span><span class="p">,</span>
        <span class="s1">&#39;commits:int:10&#39;</span><span class="p">,</span>
        <span class="s1">&#39;work:int:10&#39;</span><span class="p">,</span>
        <span class="s1">&#39;-log&#39;</span><span class="p">,</span> <span class="s1">&#39;critical&#39;</span><span class="p">,</span>
        <span class="s1">&#39;-update&#39;</span><span class="p">])</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
    <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;REPLACE INTO status (key, maintained) VALUES(</span><span class="si">%s</span><span class="s2">, </span><span class="si">%s</span><span class="s2">)&quot;</span><span class="p">,</span>
                   <span class="p">(</span><span class="n">query</span><span class="p">[</span><span class="s1">&#39;URL&#39;</span><span class="p">],</span> <span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;prediction&#39;</span><span class="p">][</span><span class="s1">&#39;value&#39;</span><span class="p">],))</span>
    <span class="n">cnx</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
    <span class="nb">print</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">success</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
<span class="k">else</span><span class="p">:</span>
</pre></div>
</td></tr></table></div>
<p>Hook up the predict button to call our new API.</p>
<p><strong>ml.js</strong></p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">predict</span><span class="p">(</span><span class="nx">URL</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">fetch</span><span class="p">(</span><span class="s1">&#39;cgi-bin/api.py?action=predict&#39;</span> <span class="o">+</span>
    <span class="s1">&#39;&amp;maintained=&#39;</span> <span class="o">+</span> <span class="nb">Number</span><span class="p">(</span><span class="nx">maintained</span><span class="p">)</span> <span class="o">+</span>
    <span class="s1">&#39;&amp;URL=&#39;</span> <span class="o">+</span> <span class="nx">URL</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">response</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">response</span><span class="p">.</span><span class="nx">json</span><span class="p">()</span>
  <span class="p">}.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">));</span>
<span class="p">}</span>

<span class="nb">window</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;DOMContentLoaded&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">tableDOM</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;table&#39;</span><span class="p">);</span>
  <span class="kd">var</span> <span class="nx">URLDOM</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;URL&#39;</span><span class="p">);</span>
  <span class="kd">var</span> <span class="nx">predictDOM</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;predict&#39;</span><span class="p">);</span>

  <span class="nx">predictDOM</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;click&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">predict</span><span class="p">(</span><span class="nx">URLDOM</span><span class="p">.</span><span class="nx">value</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">refreshTable</span><span class="p">(</span><span class="nx">tableDOM</span><span class="p">);</span>
    <span class="p">});</span>
  <span class="p">});</span>
<span class="p">});</span>
</pre></div>
</div>
<p>Finally, import the new script into the main page.</p>
<p><strong>index.html</strong></p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Git Repo Maintenance Tracker<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/javascript&quot;</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;main.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/javascript&quot;</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;ml.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/css&quot;</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;theme.css&quot;</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>Visit the web app, and input a Git repo to evaluate into the input field. Then
click predict. The demo gif has had all the entries DROPed from the database.
But you can look through the table and you’ll find that a prediction has been
run on the repo. Congratulations! You’ve automated a manual classification
process, and integrated machine learning into a legacy application.</p>
<img alt="../_images/integration_demo.gif" src="../_images/integration_demo.gif" />
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="dataflows.html" class="btn btn-neutral float-right" title="DataFlow HTTP Deployment" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="index.html" class="btn btn-neutral float-left" title="Use Cases" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2019, Intel.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>