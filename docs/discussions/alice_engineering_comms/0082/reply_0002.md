## 2022-11-10 SCITT API Emulator Spin Up

[The Alice thread continues!](https://mastodon.social/@pdxjohnny/109320563491316354)
We take one step further towards decentralization as we federate our way away from Twitter.

Today we're playing with SCITT and ATProto: https://github.com/intel/dffml/discussions/1406?sort=new#discussioncomment-4104302

Prev: https://twitter.com/pdxjohnny/status/1585488415864557568

### SCITT (virtual) CCF Spin Up

We have liftoff with virtual confidential ledger (not really using SGX).

- https://github.com/microsoft/scitt-ccf-ledger
- https://github.com/microsoft/scitt-ccf-ledger/tree/main/demo/github
- https://github.com/microsoft/scitt-ccf-ledger/blob/main/pyscitt/pyscitt/did.py
- https://asciinema.org/a/536774

```console
$ unxz -d - < ~/asciinema/DESKTOP-3LLKECP-rec-2022-11-10T08:52:20-08:00.json.xz | tee /tmp/scitt-ccf-ledger.json
$ cat /tmp/scitt-ccf-ledger.json | python -m asciinema play -s 20 -
$ python -m asciinema upload /tmp/scitt-ccf-ledger.json 
```

[![asciicast](https://asciinema.org/a/536709.svg)](https://asciinema.org/a/536709)

### 2022-11-14 SCITT API Emulator Spin Up

- References
  - https://github.com/microsoft/scitt-api-emulator/blob/2502eda6b99936a7b28792ca3fd6ba9fbf97e7ba/README.md

```console
$ git clone https://github.com/microsoft/scitt-api-emulator
$ cd scitt-api-emulator
$ git ls-files | xargs -I '{}' -- sed -i 's/python3.8/python3.10/g' '{}'
$ python -m rich.markdown README.md
$ ./scitt-emulator.sh server --workspace workspace/ --tree-alg CCF
Setting up Python virtual environment.
[notice] A new release of pip available: 22.2.2 -> 22.3.1
[notice] To update, run: pip install --upgrade pip
Service private key written to workspace/storage/service_private_key.pem
Service parameters written to workspace/service_parameters.json
Service parameters: workspace/service_parameters.json
 * Serving Flask app 'scitt_emulator.server'
 * Debug mode: on
WARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:8000
 * Running on http://192.168.1.115:8000
Press CTRL+C to quit
 * Restarting with stat
Service parameters: workspace/service_parameters.json
 * Debugger is active!
 * Debugger PIN: 000-000-000
```

- Ran commands from `README.md`

```console
$ ./scitt-emulator.sh server --workspace workspace/ --tree-alg CCF
$ ./scitt-emulator.sh client create-claim --issuer did:web:example.com --content-type application/json --payload '{"sun": "yellow"}' --out claim.cose
$ ./scitt-emulator.sh client submit-claim --claim claim.cose --out claim.receipt.cbor
$ ./scitt-emulator.sh client retrieve-claim --entry-id 1 --out claim.cose
$ ./scitt-emulator.sh client retrieve-receipt --entry-id 1 --out receipt.cbor
$ ./scitt-emulator.sh client verify-receipt --claim claim.cose --receipt claim.receipt.cbor --service-parameters workspace/service_parameters.json
```

- It works!

> The `verify-receipt` command verifies a SCITT receipt given a SCITT claim and a service parameters file. This command can be used to verify receipts generated by other implementations.
>
> The `service_parameters.json` file gets created when starting a service using `./scitt-emulator.sh server`. The format of this file is not standardized and is currently:
>
> ```json
> {
>     "serviceId": "emulator",
>     "treeAlgorithm": "CCF",
>     "signatureAlgorithm": "ES256",
>     "serviceCertificate": "-----BEGIN CERTIFICATE-----..."
> }
> ```

- We upload `alice shouldi contribute` dataflow to SCITT and get a receipt!
  - Friends, today is a great day. :railway_track:
  - Next stop, serialization / federation with Alice / Open Architecture serialization data flow as SCITT service.

[![asciicast](https://asciinema.org/a/537643.svg)](https://asciinema.org/a/537643)