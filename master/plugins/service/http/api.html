

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>API &mdash; DFFML d2978854d documentation</title>
  

  
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/tabs.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/copybutton.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

    
    <link rel="author" title="About these documents" href="../../../about.html" />
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Security" href="security.html" />
    <link rel="prev" title="DataFlow" href="dataflow.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../index.html" class="icon icon-home"> DFFML
          

          
          </a>

          
            
            
              <div class="version">
                d2978854d
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">Introduction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../about.html">About</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../concepts/index.html">Concepts</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Usage</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../quickstart/model.html">Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorials/index.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../examples/index.html">Examples</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../index.html">Plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../cli.html">Command Line</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">HTTP API</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="cli.html">Command Line</a></li>
<li class="toctree-l2"><a class="reference internal" href="dataflow.html">DataFlow</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#service">Service</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#upload">Upload</a></li>
<li class="toctree-l4"><a class="reference internal" href="#files">Files</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#list">List</a></li>
<li class="toctree-l3"><a class="reference internal" href="#configure">Configure</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#source">Source</a></li>
<li class="toctree-l4"><a class="reference internal" href="#model">Model</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#context">Context</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id4">Source</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id5">Model</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id6">Source</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#record">Record</a></li>
<li class="toctree-l4"><a class="reference internal" href="#update">Update</a></li>
<li class="toctree-l4"><a class="reference internal" href="#records">Records</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#plugin-service-http-api-model">Model</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#train">Train</a></li>
<li class="toctree-l4"><a class="reference internal" href="#accuracy">Accuracy</a></li>
<li class="toctree-l4"><a class="reference internal" href="#predict">Predict</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="security.html">Security</a></li>
<li class="toctree-l2"><a class="reference internal" href="javascript.html">JavaScript</a></li>
<li class="toctree-l2"><a class="reference internal" href="python.html">Python</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../api/plugins.html">Plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api/noasync.html">Noasync</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api/base.html">Base</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api/record.html">Record</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api/log.html">Log</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api/version.html">Version</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api/source/index.html">Source</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api/operation/index.html">Operation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api/feature/index.html">Feature</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api/high_level/index.html">High_Level</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api/accuracy/index.html">Accuracy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api/cli/index.html">Cli</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api/secret/index.html">Secret</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api/df/index.html">Df</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api/db/index.html">Db</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api/service/index.html">Service</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api/configloader/index.html">Configloader</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api/model/index.html">Model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api/util/index.html">Util</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api/port/index.html">Port</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../troubleshooting.html">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../arch/index.html">Architecture</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Subprojects</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../shouldi.html">shouldi</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../swportal.html">Software Portal</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Community</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://github.com/intel/dffml">GitHub</a></li>
<li class="toctree-l1"><a class="reference external" href="https://intel.github.io/dffml/master/">Master Branch Docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../publications.html">Publications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../contact.html">Contact Us</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../contributing/index.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../news/index.html">News</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../changelog.html">Changelog</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">DFFML</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="index.html">HTTP API</a> &raquo;</li>
        
      <li>API</li>
    
    


      <li class="wy-breadcrumbs-aside">
        
          
            
              <a href="https://github.com/intel/dffml/blob/master/docs/plugins/service/http/api.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    


  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="api">
<h1><a class="toc-backref" href="#id10">API</a><a class="headerlink" href="#api" title="Permalink to this headline">¶</a></h1>
<p>Here’s an example of using the <a class="reference internal" href="javascript.html"><span class="doc">API from JavaScript</span></a>.</p>
<p>Here’s an example of using the <a class="reference internal" href="python.html"><span class="doc">API from Python</span></a> (with requests).</p>
<div class="contents topic" id="rest-like-http-api">
<p class="topic-title">REST-like HTTP API</p>
<ul class="simple">
<li><p><a class="reference internal" href="#api" id="id10">API</a></p>
<ul>
<li><p><a class="reference internal" href="#service" id="id11">Service</a></p>
<ul>
<li><p><a class="reference internal" href="#upload" id="id12">Upload</a></p></li>
<li><p><a class="reference internal" href="#files" id="id13">Files</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#list" id="id14">List</a></p></li>
<li><p><a class="reference internal" href="#configure" id="id15">Configure</a></p>
<ul>
<li><p><a class="reference internal" href="#source" id="id16">Source</a></p></li>
<li><p><a class="reference internal" href="#model" id="id17">Model</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#context" id="id18">Context</a></p>
<ul>
<li><p><a class="reference internal" href="#id4" id="id19">Source</a></p></li>
<li><p><a class="reference internal" href="#id5" id="id20">Model</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#id6" id="id21">Source</a></p>
<ul>
<li><p><a class="reference internal" href="#record" id="id22">Record</a></p></li>
<li><p><a class="reference internal" href="#update" id="id23">Update</a></p></li>
<li><p><a class="reference internal" href="#records" id="id24">Records</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#plugin-service-http-api-model" id="id25">Model</a></p>
<ul>
<li><p><a class="reference internal" href="#train" id="id26">Train</a></p></li>
<li><p><a class="reference internal" href="#accuracy" id="id27">Accuracy</a></p></li>
<li><p><a class="reference internal" href="#predict" id="id28">Predict</a></p></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="service">
<h2><a class="toc-backref" href="#id11">Service</a><a class="headerlink" href="#service" title="Permalink to this headline">¶</a></h2>
<p>Various APIs specific to this service rather than DFFML are under this path.</p>
<div class="section" id="upload">
<h3><a class="toc-backref" href="#id12">Upload</a><a class="headerlink" href="#upload" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">/service/upload/{filename}</span></code></p></li>
</ul>
<p>Upload a file to the <code class="docutils literal notranslate"><span class="pre">-upload-dir</span></code> specified when starting the server. You can
make the filename include a path, but the server won’t create any directories
that don’t already exist.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="nt">&quot;error&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">}</span>
</pre></div>
</div>
<p>If no <code class="docutils literal notranslate"><span class="pre">-upload-dir</span></code> was given on the command line, an error will be returned.
The HTTP status code will be 501, Not Implemented.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="nt">&quot;error&quot;</span><span class="p">:</span> <span class="s2">&quot;Uploads not allowed&quot;</span><span class="p">}</span>
</pre></div>
</div>
<p>If you attempt to use <code class="docutils literal notranslate"><span class="pre">../../</span></code> or anything which would cause a path outside of
the given <code class="docutils literal notranslate"><span class="pre">-upload-dir</span></code> this endpoint will return an error. The HTTP status
code will be 400, Bad Request.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="nt">&quot;error&quot;</span><span class="p">:</span> <span class="s2">&quot;Attempted path traversal&quot;</span><span class="p">}</span>
</pre></div>
</div>
<p>If your multipart data doesn’t have a field with the <code class="docutils literal notranslate"><span class="pre">name</span></code> of <code class="docutils literal notranslate"><span class="pre">file</span></code>, you
will get an error. The HTTP status code will be 400, Bad Request.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="nt">&quot;error&quot;</span><span class="p">:</span> <span class="s2">&quot;Missing &#39;file&#39; field&quot;</span><span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="files">
<h3><a class="toc-backref" href="#id13">Files</a><a class="headerlink" href="#files" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">/service/files</span></code></p></li>
</ul>
<p>List files in the <code class="docutils literal notranslate"><span class="pre">-upload-dir</span></code> specified when starting the server. The file
listing will include the size of the file in bytes.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
  <span class="p">{</span>
    <span class="nt">&quot;filename&quot;</span><span class="p">:</span> <span class="s2">&quot;.gitignore&quot;</span><span class="p">,</span>
    <span class="nt">&quot;size&quot;</span><span class="p">:</span> <span class="mi">199</span>
  <span class="p">},</span>
  <span class="p">{</span>
    <span class="nt">&quot;filename&quot;</span><span class="p">:</span> <span class="s2">&quot;.dockerignore&quot;</span><span class="p">,</span>
    <span class="nt">&quot;size&quot;</span><span class="p">:</span> <span class="mi">18</span>
  <span class="p">},</span>
  <span class="p">{</span>
    <span class="nt">&quot;filename&quot;</span><span class="p">:</span> <span class="s2">&quot;setup.py&quot;</span><span class="p">,</span>
    <span class="nt">&quot;size&quot;</span><span class="p">:</span> <span class="mi">2337</span>
  <span class="p">},</span>
  <span class="p">{</span>
    <span class="nt">&quot;filename&quot;</span><span class="p">:</span> <span class="s2">&quot;.coveragerc&quot;</span><span class="p">,</span>
    <span class="nt">&quot;size&quot;</span><span class="p">:</span> <span class="mi">170</span>
  <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
<p>If no <code class="docutils literal notranslate"><span class="pre">-upload-dir</span></code> was given on the command line, an error will be returned.
The HTTP status code will be 501, Not Implemented.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="nt">&quot;error&quot;</span><span class="p">:</span> <span class="s2">&quot;File listing not allowed&quot;</span><span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="list">
<span id="id1"></span><h2><a class="toc-backref" href="#id14">List</a><a class="headerlink" href="#list" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">/list/{plugin_type}</span></code></p></li>
</ul>
<p>List APIs return JSON objects where the keys are the names of the loadable
classes for a given type of DFFML plugin. The values are that plugin’s
configuration options.</p>
<p>Current supported DFFML plugins are as follows.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">sources</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">models</span></code></p></li>
</ul>
<p>To list available plugins, send a <code class="docutils literal notranslate"><span class="pre">GET</span></code> request to the endpoint.</p>
<p>The following is an example response body for a request to list available
sources.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">/list/sources</span></code></p></li>
</ul>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;csv&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;source&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;plugin&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
      <span class="nt">&quot;config&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;csv&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;plugin&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
          <span class="nt">&quot;config&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;filename&quot;</span><span class="p">:</span> <span class="p">{</span>
              <span class="nt">&quot;plugin&quot;</span><span class="p">:</span> <span class="p">{},</span>
              <span class="nt">&quot;config&quot;</span><span class="p">:</span> <span class="p">{}</span>
            <span class="p">},</span>
            <span class="nt">&quot;readwrite&quot;</span><span class="p">:</span> <span class="p">{</span>
              <span class="nt">&quot;plugin&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;bool&quot;</span><span class="p">,</span>
                <span class="nt">&quot;action&quot;</span><span class="p">:</span> <span class="s2">&quot;store_true&quot;</span><span class="p">,</span>
                <span class="nt">&quot;default&quot;</span><span class="p">:</span> <span class="kc">false</span>
              <span class="p">},</span>
              <span class="nt">&quot;config&quot;</span><span class="p">:</span> <span class="p">{}</span>
            <span class="p">},</span>
            <span class="nt">&quot;allowempty&quot;</span><span class="p">:</span> <span class="p">{</span>
              <span class="nt">&quot;plugin&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;bool&quot;</span><span class="p">,</span>
                <span class="nt">&quot;action&quot;</span><span class="p">:</span> <span class="s2">&quot;store_true&quot;</span><span class="p">,</span>
                <span class="nt">&quot;default&quot;</span><span class="p">:</span> <span class="kc">false</span>
              <span class="p">},</span>
              <span class="nt">&quot;config&quot;</span><span class="p">:</span> <span class="p">{}</span>
            <span class="p">},</span>
            <span class="nt">&quot;label&quot;</span><span class="p">:</span> <span class="p">{</span>
              <span class="nt">&quot;plugin&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;str&quot;</span><span class="p">,</span>
                <span class="nt">&quot;default&quot;</span><span class="p">:</span> <span class="s2">&quot;unlabeled&quot;</span>
              <span class="p">},</span>
              <span class="nt">&quot;config&quot;</span><span class="p">:</span> <span class="p">{}</span>
            <span class="p">},</span>
            <span class="nt">&quot;key&quot;</span><span class="p">:</span> <span class="p">{</span>
              <span class="nt">&quot;plugin&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;str&quot;</span><span class="p">,</span>
                <span class="nt">&quot;default&quot;</span><span class="p">:</span> <span class="kc">null</span>
              <span class="p">},</span>
              <span class="nt">&quot;config&quot;</span><span class="p">:</span> <span class="p">{}</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="configure">
<span id="id2"></span><h2><a class="toc-backref" href="#id15">Configure</a><a class="headerlink" href="#configure" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">/configure/{dffml</span> <span class="pre">plugin</span> <span class="pre">type}/{plugin</span> <span class="pre">name}/{label}</span></code></p></li>
</ul>
<p>The configure API allows for creation of instances of DFFML plugin types.
Callers supply the type of plugin to instantiate, the name of that plugin, and
then label it will be assigned when using it.</p>
<p>Configuration options can be found in the docs for the various plugins or via
the <a class="reference internal" href="#list"><span class="std std-ref">List</span></a> endpoint.</p>
<p>To configure a plugin, send a <code class="docutils literal notranslate"><span class="pre">POST</span></code> request to the endpoint containing only
the JSON object to be used as the configuration of the requested plugin.</p>
<p>On successful creation and configuration the server will return <code class="docutils literal notranslate"><span class="pre">null</span></code>
for <code class="docutils literal notranslate"><span class="pre">error</span></code>.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="nt">&quot;error&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">}</span>
</pre></div>
</div>
<p>If the plugin name requested is not loadable the server will return a HTTP
status code of 404, Not Found.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="nt">&quot;error&quot;</span><span class="p">:</span> <span class="s2">&quot;source non-existant not found&quot;</span><span class="p">}</span>
</pre></div>
</div>
<p>If there is a problem with configuration the server will tell the client. The
HTTP status code will be 400, Bad Request.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="nt">&quot;error&quot;</span><span class="p">:</span> <span class="s2">&quot;CSVSource missing &#39;filename&#39; from source.mydataset&quot;</span><span class="p">}</span>
</pre></div>
</div>
<div class="section" id="source">
<h3><a class="toc-backref" href="#id16">Source</a><a class="headerlink" href="#source" title="Permalink to this headline">¶</a></h3>
<p>The following is an example request body to configure the <code class="docutils literal notranslate"><span class="pre">csv</span></code> source. The
URL this <code class="docutils literal notranslate"><span class="pre">POST</span></code> request is sent to is.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">/configure/source/csv/mydataset</span></code></p></li>
</ul>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;source&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;plugin&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nt">&quot;config&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;filename&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;plugin&quot;</span><span class="p">:</span> <span class="p">[</span>
          <span class="s2">&quot;dataset.csv&quot;</span>
        <span class="p">],</span>
        <span class="nt">&quot;config&quot;</span><span class="p">:</span> <span class="p">{}</span>
      <span class="p">},</span>
      <span class="nt">&quot;readwrite&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;plugin&quot;</span><span class="p">:</span> <span class="p">[</span>
          <span class="kc">true</span>
        <span class="p">],</span>
        <span class="nt">&quot;config&quot;</span><span class="p">:</span> <span class="p">{}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="model">
<h3><a class="toc-backref" href="#id17">Model</a><a class="headerlink" href="#model" title="Permalink to this headline">¶</a></h3>
<p>The following is an example request body to configure a model. The URL this
<code class="docutils literal notranslate"><span class="pre">POST</span></code> request is sent to is.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">/configure/model/fake/mymodel</span></code></p></li>
</ul>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;model&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;plugin&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nt">&quot;config&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;location&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;plugin&quot;</span><span class="p">:</span> <span class="p">[</span>
          <span class="s2">&quot;/home/user/modeldirs/mymodel&quot;</span>
        <span class="p">],</span>
        <span class="nt">&quot;config&quot;</span><span class="p">:</span> <span class="p">{}</span>
      <span class="p">},</span>
      <span class="nt">&quot;features&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;plugin&quot;</span><span class="p">:</span> <span class="p">[</span>
          <span class="p">{</span>
            <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Years&quot;</span><span class="p">,</span>
            <span class="nt">&quot;dtype&quot;</span><span class="p">:</span> <span class="s2">&quot;int&quot;</span><span class="p">,</span>
            <span class="nt">&quot;length&quot;</span><span class="p">:</span> <span class="mi">1</span>
          <span class="p">},</span>
          <span class="p">{</span>
            <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Expertise&quot;</span><span class="p">,</span>
            <span class="nt">&quot;dtype&quot;</span><span class="p">:</span> <span class="s2">&quot;int&quot;</span><span class="p">,</span>
            <span class="nt">&quot;length&quot;</span><span class="p">:</span> <span class="mi">1</span>
          <span class="p">},</span>
          <span class="p">{</span>
            <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Trust&quot;</span><span class="p">,</span>
            <span class="nt">&quot;dtype&quot;</span><span class="p">:</span> <span class="s2">&quot;float&quot;</span><span class="p">,</span>
            <span class="nt">&quot;length&quot;</span><span class="p">:</span> <span class="mi">1</span>
          <span class="p">}</span>
        <span class="p">],</span>
        <span class="nt">&quot;config&quot;</span><span class="p">:</span> <span class="p">{}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="context">
<span id="id3"></span><h2><a class="toc-backref" href="#id18">Context</a><a class="headerlink" href="#context" title="Permalink to this headline">¶</a></h2>
<p>After a plugin has been configured, a context must be created. The context label
will be used in all requests for that plugin type, to reference which context
the respective methods should be called on.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">/context/{plugin_type}/{label}/{ctx_label}</span></code></p></li>
</ul>
<p>To create a context, send a <code class="docutils literal notranslate"><span class="pre">GET</span></code> or <code class="docutils literal notranslate"><span class="pre">POST</span></code> request to the endpoint
containing the JSON object to be used as the configuration parameters of the
requested plugin context type.</p>
<p>On successful creation of a context the server will return <code class="docutils literal notranslate"><span class="pre">null</span></code> for
<code class="docutils literal notranslate"><span class="pre">error</span></code>.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="nt">&quot;error&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">}</span>
</pre></div>
</div>
<p>If there is no configured plugin for the given label the server will return a
HTTP status code of 404, Not Found.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="nt">&quot;error&quot;</span><span class="p">:</span> <span class="s2">&quot;mydataset source not found&quot;</span><span class="p">}</span>
</pre></div>
</div>
<div class="section" id="id4">
<h3><a class="toc-backref" href="#id19">Source</a><a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
<p>The following is an example request body to create a source context. The URL
this <code class="docutils literal notranslate"><span class="pre">GET</span></code> request is sent to is.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">/context/source/mydataset/ctx_mydataset</span></code></p></li>
</ul>
</div>
<div class="section" id="id5">
<h3><a class="toc-backref" href="#id20">Model</a><a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h3>
<p>The following is an example request body to create a model context. The URL
this <code class="docutils literal notranslate"><span class="pre">GET</span></code> request is sent to is.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">/context/model/mymodel/ctx_mymodel</span></code></p></li>
</ul>
</div>
</div>
<div class="section" id="id6">
<h2><a class="toc-backref" href="#id21">Source</a><a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">/source/{ctx_label}/{source</span> <span class="pre">context</span> <span class="pre">method}/{...}</span></code></p></li>
</ul>
<p>The source endpoint exposes all of the methods you’d find in
<code class="xref py py-class docutils literal notranslate"><span class="pre">dffml.source.BaseSourceContext</span></code>. The ctx_label parameter in the URL
is the label of the source context that was configured via the <a class="reference internal" href="#configure"><span class="std std-ref">Configure</span></a>
and then the <a class="reference internal" href="#context"><span class="std std-ref">Context</span></a> APIs.</p>
<p>If the ctx_label provided does not exist, for instance the configure and
context APIs were not used prior to calling a source method, the server will
return a 404, Not Found response.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="nt">&quot;error&quot;</span><span class="p">:</span> <span class="s2">&quot;Source not loaded&quot;</span><span class="p">}</span>
</pre></div>
</div>
<div class="section" id="record">
<span id="id7"></span><h3><a class="toc-backref" href="#id22">Record</a><a class="headerlink" href="#record" title="Permalink to this headline">¶</a></h3>
<p>Access a record by it’s unique key. The response will be the JSON representation
of the record. Here’s an example response for a <code class="docutils literal notranslate"><span class="pre">GET</span></code> request.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">/source/{ctx_label}/record/{key}</span></code></p></li>
</ul>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;key&quot;</span><span class="p">:</span> <span class="s2">&quot;myrecord&quot;</span><span class="p">,</span>
  <span class="nt">&quot;features&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;myfeature&quot;</span><span class="p">:</span> <span class="s2">&quot;somevalue&quot;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Just as with DFFML, you’ll still get a record even if the record doesn’t exist
within the source. However, it will only contain the <code class="docutils literal notranslate"><span class="pre">key</span></code>.</p>
</div>
<div class="section" id="update">
<h3><a class="toc-backref" href="#id23">Update</a><a class="headerlink" href="#update" title="Permalink to this headline">¶</a></h3>
<p>Update a record by it’s unique key. <code class="docutils literal notranslate"><span class="pre">POST</span></code> data in the same format received from
record.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">/source/{ctx_label}/update/{key}</span></code></p></li>
</ul>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;key&quot;</span><span class="p">:</span> <span class="s2">&quot;myrecord&quot;</span><span class="p">,</span>
  <span class="nt">&quot;features&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;myfeature&quot;</span><span class="p">:</span> <span class="s2">&quot;somevalue&quot;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Unless something goes wrong within the source, you’ll get a <code class="docutils literal notranslate"><span class="pre">null</span></code> error
response.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="nt">&quot;error&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="records">
<h3><a class="toc-backref" href="#id24">Records</a><a class="headerlink" href="#records" title="Permalink to this headline">¶</a></h3>
<p>Initially, client makes a <code class="docutils literal notranslate"><span class="pre">GET</span></code> request to the API with the <code class="docutils literal notranslate"><span class="pre">chunk_size</span></code> for
the first iteration. <code class="docutils literal notranslate"><span class="pre">chunk_size</span></code> is the number of records to return in one
iteration. The response object will have two properties, <code class="docutils literal notranslate"><span class="pre">iterkey</span></code> and
<code class="docutils literal notranslate"><span class="pre">records</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">records</span></code> is a key value mapping of record <code class="docutils literal notranslate"><span class="pre">key</span></code>’s to their JSON serialized
record object.</p>
<p><code class="docutils literal notranslate"><span class="pre">iterkey</span></code> will be <code class="docutils literal notranslate"><span class="pre">null</span></code> if there are no more records in the source. If
<code class="docutils literal notranslate"><span class="pre">iterkey</span></code> is not <code class="docutils literal notranslate"><span class="pre">null</span></code> then there are more records to iterate over. The API
should be called using the response’s <code class="docutils literal notranslate"><span class="pre">iterkey</span></code> value until the response
contains an <code class="docutils literal notranslate"><span class="pre">iterkey</span></code> value of <code class="docutils literal notranslate"><span class="pre">null</span></code>.</p>
<p>Sample response where <code class="docutils literal notranslate"><span class="pre">chunk_size</span></code> is <code class="docutils literal notranslate"><span class="pre">1</span></code> and there are more records to
iterate over. We continue making <code class="docutils literal notranslate"><span class="pre">GET</span></code> requests until <code class="docutils literal notranslate"><span class="pre">iterkey</span></code> is <code class="docutils literal notranslate"><span class="pre">null</span></code>.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">/source/{ctx_label}/records/{chunk_size}</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/source/{ctx_label}/records/{iterkey}/{chunk_size}</span></code></p></li>
</ul>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;iterkey&quot;</span><span class="p">:</span> <span class="s2">&quot;1a164836c6d8a27fdf9cd12688440aaa16a852fd1814b170c924a89fba4e084c8ea7522c34f9f5a539803d6237238e90&quot;</span><span class="p">,</span>
  <span class="nt">&quot;records&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;myrecord&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;key&quot;</span><span class="p">:</span> <span class="s2">&quot;myrecord&quot;</span><span class="p">,</span>
      <span class="nt">&quot;features&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;myfeature&quot;</span><span class="p">:</span> <span class="s2">&quot;somevalue&quot;</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Sample response where the end of iteration has been reached.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;iterkey&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
  <span class="nt">&quot;records&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;anotherrecord&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;key&quot;</span><span class="p">:</span> <span class="s2">&quot;anotherrecord&quot;</span><span class="p">,</span>
      <span class="nt">&quot;features&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;myfeature&quot;</span><span class="p">:</span> <span class="s2">&quot;othervalue&quot;</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="plugin-service-http-api-model">
<span id="id8"></span><h2><a class="toc-backref" href="#id25">Model</a><a class="headerlink" href="#plugin-service-http-api-model" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">/model/{ctx_label}/{model</span> <span class="pre">context</span> <span class="pre">method}/{...}</span></code></p></li>
</ul>
<p>The model endpoint exposes all of the methods you’d find in
<code class="xref py py-class docutils literal notranslate"><span class="pre">dffml.model.ModelContext</span></code>. The ctx_label parameter in the URL
is the label of the model context that was configured via the <a class="reference internal" href="#configure"><span class="std std-ref">Configure</span></a>
and then the <a class="reference internal" href="#context"><span class="std std-ref">Context</span></a> APIs.</p>
<p>If the ctx_label provided does not exist, for instance the configure and
context APIs were not used prior to calling a model method, the server will
return a 404, Not Found response.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="nt">&quot;error&quot;</span><span class="p">:</span> <span class="s2">&quot;Model not loaded&quot;</span><span class="p">}</span>
</pre></div>
</div>
<div class="section" id="train">
<span id="id9"></span><h3><a class="toc-backref" href="#id26">Train</a><a class="headerlink" href="#train" title="Permalink to this headline">¶</a></h3>
<p>Send a <code class="docutils literal notranslate"><span class="pre">POST</span></code> request with the JSON body being a list of source context labels
to use as training data.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">/model/{ctx_label}/train</span></code></p></li>
</ul>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
  <span class="s2">&quot;my_training_dataset&quot;</span>
<span class="p">]</span>
</pre></div>
</div>
<p>Unless something goes wrong within the model, you’ll get a <code class="docutils literal notranslate"><span class="pre">null</span></code> error
response.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="nt">&quot;error&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="accuracy">
<h3><a class="toc-backref" href="#id27">Accuracy</a><a class="headerlink" href="#accuracy" title="Permalink to this headline">¶</a></h3>
<p>Send a <code class="docutils literal notranslate"><span class="pre">POST</span></code> request with the JSON body being a list of source context labels
to use as test data.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">/scorer/{ctx_label}/{mctx_label}/score</span></code></p></li>
</ul>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
  <span class="s2">&quot;my_test_dataset&quot;</span>
<span class="p">]</span>
</pre></div>
</div>
<p>The response will be a JSON object containing the <code class="docutils literal notranslate"><span class="pre">accuracy</span></code> as a float value.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="nt">&quot;accuracy&quot;</span><span class="p">:</span> <span class="mf">0.42</span><span class="p">}</span>
</pre></div>
</div>
<p>Unless something goes wrong within the model, you’ll get a <code class="docutils literal notranslate"><span class="pre">null</span></code> error
response.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="nt">&quot;error&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="predict">
<h3><a class="toc-backref" href="#id28">Predict</a><a class="headerlink" href="#predict" title="Permalink to this headline">¶</a></h3>
<p>To use a model for prediction, send a <code class="docutils literal notranslate"><span class="pre">POST</span></code> request to the following URL with
the body being a JSON object mapping <code class="docutils literal notranslate"><span class="pre">key</span></code> of the record to the JSON
representation of <a class="reference internal" href="../../../api/record.html#dffml.record.Record" title="dffml.record.Record"><code class="xref py py-class docutils literal notranslate"><span class="pre">dffml.record.Record</span></code></a> as received by the source record
endpoint.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">/model/{ctx_label}/predict/0</span></code></p></li>
</ul>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;42&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;features&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;by_ten&quot;</span><span class="p">:</span> <span class="mi">420</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Sample response.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;iterkey&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
  <span class="nt">&quot;records&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;42&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;key&quot;</span><span class="p">:</span> <span class="s2">&quot;42&quot;</span><span class="p">,</span>
      <span class="nt">&quot;features&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;by_ten&quot;</span><span class="p">:</span> <span class="mi">420</span>
      <span class="p">},</span>
      <span class="nt">&quot;prediction&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;confidence&quot;</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
        <span class="nt">&quot;value&quot;</span><span class="p">:</span> <span class="mi">4200</span>
      <span class="p">},</span>
      <span class="nt">&quot;last_updated&quot;</span><span class="p">:</span> <span class="s2">&quot;2019-10-15T08:19:41Z&quot;</span><span class="p">,</span>
      <span class="nt">&quot;extra&quot;</span><span class="p">:</span> <span class="p">{}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="security.html" class="btn btn-neutral float-right" title="Security" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="dataflow.html" class="btn btn-neutral float-left" title="DataFlow" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2017 - 2021, Intel.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>